## Product Requirements Document (PRD)

**Feature:** Display ‚ÄúCurrent Location‚Äù map component on [laxmideepak-portfolio.vercel.app](https://laxmideepak-portfolio.vercel.app/) (a Next.js portfolio site)
**Goal:** Give visitors an at-a-glance, real-time view of their current position‚Äîsimilar in spirit to Lyft‚Äôs ‚ÄúYou are here‚Äù card‚Äîwithout storing or re-using the data elsewhere.

---

### 1  UI Requirements

| Page / Section                               | Component                                                           | Key Behaviours                                                                                                                                                    |
| -------------------------------------------- | ------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Home (or dedicated ‚ÄúContact Me‚Äù section)** | **Location Card** (‚âà 300 √ó 220 px on desktop; full-width on mobile) | ‚Ä¢ Mini-map with blue ‚Äúyou‚Äù pin<br>‚Ä¢ Title text: ‚ÄúYou are here‚Äù<br>‚Ä¢ Subtitle with street + city (reverse-geocoded)<br>‚Ä¢ Light/dark theme parity with rest of site |
| **Modal / Permission Banner**                | Top-of-page toast asking for geolocation permission                 | ‚Ä¢ Only appears first visit or until user decides<br>‚Ä¢ Links to Privacy Policy                                                                                     |

Responsive rules

* **‚â• 1280 px:** Card floats right of hero text.
* **< 1280 px:** Card stacks below primary content.
* **‚â§ 640 px:** Card occupies 90 % width; height shrinks to 160 px.

---

### 2  Functional Requirements

| ID      | Description                                                                                                 | Priority |
| ------- | ----------------------------------------------------------------------------------------------------------- | -------- |
| **F-1** | On page load, request browser geolocation.                                                                  | P0       |
| **F-2** | Render map centered on latitude/longitude with ‚Äúpulsing‚Äù user pin.                                          | P0       |
| **F-3** | Update position in real time (‚â§ 1 s latency) while page remains open.                                       | P1       |
| **F-4** | Graceful fallback: if permission denied or unavailable, show static world graphic + ‚ÄúLocation unavailable‚Äù. | P0       |
| **F-5** | Reverse-geocode coordinates to readable address once, cache for session.                                    | P2       |

---

### 3  Technical Requirements

* **Frontend stack**

  * Next.js 14 (React 18)
  * Map rendering ‚Üí Mapbox GL JS (lightweight; no Google API billing)
  * State management via React Context or Zustand for position stream
  * Real-time updates ‚Üí `navigator.geolocation.watchPosition()`; abort via `clearWatch` on unmount
* **APIs & keys**

  * Mapbox token (public but domain-restricted)
  * Optional: Nominatim / Mapbox Geocoding for reverse lookup
* **Performance**

  * Lazy-load map bundle only when component becomes visible (Next.js dynamic import + `ssr:false`)
  * Throttle updates to 1 Hz; ignore movements < 5 m to cut re-renders
* **Accessibility**

  * Provide ARIA label ‚ÄúUser location map‚Äù
  * Pin icon complies with WCAG color-contrast against map style

---

### 4  UX Considerations

1. **Consent first**‚ÄÉUse native permission dialog triggered by explicit button (‚ÄúShow my location‚Äù) to avoid auto-prompting on load.
2. **Feedback loops**‚ÄÉWhile awaiting coordinates, show spinner overlay (‚ÄúFinding you‚Ä¶‚Äù).
3. **Contextual copy**‚ÄÉIf user is far (> 50 km) from site owner‚Äôs city (Dallas), optionally surface call-to-action: ‚Äúüëã Let‚Äôs connect remotely!‚Äù
4. **Error states**‚ÄÉClear, friendly messages for timeout, denied, or insecure-origin errors (must force **HTTPS**).

---

### 5  Security & Privacy

| Concern            | Mitigation                                                                             |
| ------------------ | -------------------------------------------------------------------------------------- |
| Data minimisation  | Location never sent to backend; lives solely in client memory.                         |
| Transport security | Site already on Vercel HTTPS. Geolocation works only over secure origin.               |
| Third-party calls  | Map tiles & reverse-geocode use domain-scoped API keys; no PII transmitted.            |
| Policy updates     | Privacy Policy section amended to explain purpose, retention (none), and user control. |

---

### 6  Testing & Quality Assurance

| Phase             | Test Cases                                                                    | Tools                        |
| ----------------- | ----------------------------------------------------------------------------- | ---------------------------- |
| **Unit**          | ‚Ä¢ Hook returns coords / errors<br>‚Ä¢ Map renders with props                    | Jest + React Testing Library |
| **Integration**   | ‚Ä¢ watchPosition starts/stops on mount/unmount<br>‚Ä¢ Reverse-geocode fires once | Cypress component tests      |
| **Cross-browser** | Chrome, Safari, Firefox, Edge (latest 2 versions)                             | BrowserStack Automate        |
| **Device matrix** | iOS 15+ (Safari, Chrome), Android 11+ (Chrome), macOS/Windows laptops         | Real devices & simulators    |
| **Performance**   | Lighthouse ‚â§ 100 KB JS upward diff; map lazy-load verified                    | Chrome DevTools              |
| **Accessibility** | Axe-core score ‚â• 98; keyboard nav & screen-reader pin alt text                | Axe CLI                      |
| **Security**      | Verify no location data in network tab; check Content Security Policy         | OWASP ZAP spider             |

**Definition of Done**

* 100 % unit & integration tests passing
* Card visually matches Figma spec on all breakpoints
* No Lighthouse regressions > 2 pt
* Privacy Policy updated and legal review signed-off

---

**Release Target:** 1 sprint (2 weeks) after design approval.
